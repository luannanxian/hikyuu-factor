# A股量化因子系统 - 环境变量配置模板
# 复制此文件为 .env 并填入实际值

# =============================================================================
# 数据库配置
# =============================================================================

# MySQL数据库连接URL
# 格式: mysql://username:password@host:port/database
DATABASE_URL=mysql://hikyuu_user:<your_password>@localhost:3306/hikyuu_factor

# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# Redis缓存配置
# =============================================================================

# Redis连接URL
REDIS_URL=redis://localhost:6379/0

# Redis连接池配置
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5

# =============================================================================
# Hikyuu框架配置
# =============================================================================

# Hikyuu数据目录
HIKYUU_DATA_DIR=/path/to/hikyuu/data

# Hikyuu配置文件路径
HIKYUU_CONFIG_FILE=/path/to/hikyuu/config.ini

# 数据源配置
HIKYUU_DATA_SOURCE=tdx  # tdx, mysql, sqlite等

# 股票市场配置
HIKYUU_MARKET=sh,sz  # 支持的市场代码

# =============================================================================
# 应用配置
# =============================================================================

# 应用环境 (development, staging, production)
ENVIRONMENT=development

# 调试模式 (true/false)
DEBUG=true

# API服务配置
API_HOST=0.0.0.0
API_PORT=8000

# 日志级别 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE=logs/hikyuu_factor.log

# =============================================================================
# 安全配置
# =============================================================================

# 应用密钥 (用于加密和签名)
SECRET_KEY=<generate_a_secure_random_key_here>

# API密钥 (用于API认证)
API_KEY=<your_api_key_here>

# JWT密钥 (如果使用JWT认证)
JWT_SECRET=<your_jwt_secret_here>
JWT_EXPIRE_MINUTES=60

# =============================================================================
# Agent服务配置
# =============================================================================

# DataManager Agent配置
DATA_AGENT_HOST=localhost
DATA_AGENT_PORT=8001

# FactorCalculation Agent配置
FACTOR_AGENT_HOST=localhost
FACTOR_AGENT_PORT=8002

# Validation Agent配置
VALIDATION_AGENT_HOST=localhost
VALIDATION_AGENT_PORT=8003

# SignalGeneration Agent配置
SIGNAL_AGENT_HOST=localhost
SIGNAL_AGENT_PORT=8004

# =============================================================================
# 性能优化配置
# =============================================================================

# 平台类型自动检测 (apple_silicon, x86_64, arm64_linux, generic)
# 留空则自动检测
PLATFORM_OVERRIDE=

# 并行进程数 (留空则自动检测CPU核心数)
PROCESS_COUNT=

# 低精度模式 (true/false, ARM优化)
LOW_PRECISION_MODE=false

# 内存限制 (MB)
MEMORY_LIMIT=4096

# =============================================================================
# 监控和报警配置
# =============================================================================

# Prometheus监控端口
PROMETHEUS_PORT=9090

# 监控数据保留天数
METRICS_RETENTION_DAYS=30

# 报警邮件配置
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=smtp.example.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=<your_email>
ALERT_EMAIL_PASSWORD=<your_email_password>
ALERT_EMAIL_FROM=<alert_from_email>
ALERT_EMAIL_TO=<alert_to_email>

# =============================================================================
# 交易信号确认配置
# =============================================================================

# 人工确认超时时间 (分钟)
SIGNAL_CONFIRM_TIMEOUT=30

# 风险检查阈值
RISK_CHECK_MAX_POSITION=0.1  # 最大仓位比例
RISK_CHECK_MAX_DRAWDOWN=0.05  # 最大回撤比例

# 交易时间窗口
TRADING_START_TIME=09:30
TRADING_END_TIME=15:00

# =============================================================================
# 数据源配置
# =============================================================================

# 通达信数据源
TDX_DATA_PATH=/path/to/tdx/data

# 财经数据API (如果使用外部数据源)
FINANCE_API_KEY=<your_finance_api_key>
FINANCE_API_URL=https://api.example.com

# 股票基础信息更新频率 (小时)
STOCK_INFO_UPDATE_INTERVAL=24

# 交易日历更新频率 (小时)
CALENDAR_UPDATE_INTERVAL=168  # 7天

# =============================================================================
# 开发和测试配置
# =============================================================================

# 测试数据库URL (用于运行测试)
TEST_DATABASE_URL=mysql://test_user:<test_password>@localhost:3306/hikyuu_factor_test

# 测试Redis URL
TEST_REDIS_URL=redis://localhost:6379/1

# 是否运行性能测试
RUN_PERFORMANCE_TESTS=false

# 测试数据路径
TEST_DATA_PATH=tests/fixtures/data

# =============================================================================
# 审计和合规配置
# =============================================================================

# 审计日志启用
AUDIT_LOG_ENABLED=true

# 审计日志文件路径
AUDIT_LOG_FILE=logs/audit.log

# 数据保留策略 (天)
AUDIT_RETENTION_DAYS=365
FACTOR_DATA_RETENTION_DAYS=90
SIGNAL_DATA_RETENTION_DAYS=30

# 合规检查启用
COMPLIANCE_CHECK_ENABLED=true